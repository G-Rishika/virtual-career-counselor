<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Virtual Career Counselor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- ================= NAVBAR ================= -->
<header class="navbar">
    <div class="nav-logo">VCC</div>
    <nav>
        <a href="{{ url_for('index') }}">Home</a>
        <a href="{{ url_for('about') }}">About</a>

        {% if 'user' in session %}
            <a href="{{ url_for('home') }}" class="btn-outline">Dashboard</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login</a>
            <a href="{{ url_for('signup') }}" class="btn-primary">Get Started</a>
        {% endif %}
    </nav>
</header>

<!-- ================= FLASH MESSAGES ================= -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="flash-wrapper">
    {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<!-- ================= PAGE CONTENT ================= -->
{% block content %}{% endblock %}

<!-- ================= FOOTER ================= -->
<footer>
    <p>Â© 2026 Virtual Career Counselor Â· Created by Rishika</p>
</footer>

<!-- ================= CHATBOT ================= -->
<div id="chatbot-container">

    <!-- Floating Button -->
    <div id="chatbot-button">ðŸ’¬</div>

    <!-- Chat Box -->
    <div id="chatbot-box">
        <div class="chatbot-header">
            <span>Career Assistant</span>
            <button id="close-chatbot">âœ•</button>
        </div>

        <div id="chatbot-messages">
            <div class="bot-message">
                Hey ðŸ‘‹ Iâ€™m your career assistant. Ask me anything!
            </div>
        </div>

        <form id="chatbot-form">
            <input type="text" id="chatbot-input" placeholder="Ask about careers..." required>
            <button type="submit">âž¤</button>
        </form>
    </div>

</div>

<!-- ================= CHATBOT SCRIPT ================= -->
<script>
const chatbotButton = document.getElementById('chatbot-button');
const chatbotBox = document.getElementById('chatbot-box');
const closeChatbot = document.getElementById('close-chatbot');
const chatbotForm = document.getElementById('chatbot-form');
const chatbotInput = document.getElementById('chatbot-input');
const chatbotMessages = document.getElementById('chatbot-messages');

// Open chat
chatbotButton.onclick = () => {
    chatbotBox.style.display = 'flex';
    chatbotButton.style.display = 'none';
};

// Close chat
closeChatbot.onclick = () => {
    chatbotBox.style.display = 'none';
    chatbotButton.style.display = 'flex';
};

// Send message
chatbotForm.onsubmit = async (e) => {
    e.preventDefault();

    const message = chatbotInput.value.trim();
    if (!message) return;

    chatbotMessages.innerHTML += `
        <div class="user-message">${message}</div>
    `;
    chatbotInput.value = "";

    const response = await fetch("{{ url_for('chat') }}", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ message })
    });

    const data = await response.json();

    chatbotMessages.innerHTML += `
        <div class="bot-message">${data.reply}</div>
    `;

    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
};
</script>

</body>
</html>
